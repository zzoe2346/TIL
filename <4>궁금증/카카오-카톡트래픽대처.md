# [카카오]"폭증하는 카카오톡 트래픽에 대처하는 방법"를 보고
https://youtu.be/U905BeDQ_BA?si=0aRKQvR_cHr075O_
# 정리
와 초당 62만건의 메세지 트래픽이
와 초당 44800건의 메시지 전송 트래픽. 다른 모든 요청 합치면 620000건 와우.

## 트래픽이 폭증하는 경우
- 새해 인사
- 지진같은 자연재해
- 국가적 이벤트
## 백그라운드 로그인 기능 
채팅방의 다른 사용자가 나한테 메시지 보냄 -> 난 다른일 중이라 카톡 서버에 미접속중 -> 카톡 서버가 나한테 푸시 전송을 함->푸시받으면 깨어나면서  카톡 클라이언트는카톡 서버에 로그인 요청 -> 로그인 요청하면 TCP연결을 맺은 상태로 유지->이러면 내가 다시 카톡을 켰을때 로그인 과정이 필요없이 바로 메시지를 확인 가능. 즉, 빠르게 메시지를 확인할 수 있군. 로그인을 미리했으니

## 지진으로 인해 전국민에게 푸시가 된 상황
### 원인
지진대문에 푸시를 받으면 폰이 깨어남. 이때 카톡 클라이언트가 백그라운드 로그인을 위해 카톡 서버에 로그인 요청을함. 이때 문제가 전국민이 푸시를 받은 상황이라 카톡 서버에 전 국민의 로그인 요청이 겁나 온다. 평시는 카톡 푸시알림을 받거나 사용자가 카톡을 켤때 다른 푸시 받을때 로그인 요청이오는것임.
### 트래픽 폭증 자동 대응 시스템 구축 방법
활성화된스레드 비율로 트래픽 폭증 인지. 지정된 비율을 넘어서면 백그라운드 로그인 차단 비율을 높이고, 재시도 횟수도 제한 시킨다.

불필요한, 카톡이 의도치 않은 백그라운드 로그인 시도 방지 및 차단

요청 별 로그인 요청, 
그니까 무거운 로그인 요청의 한계 스레드를 설정해서 특정 요청이 스레드를 오래 가지는 문제점을 해결. 그런데 이러면 로그인이 늦게되는데 괜찮은가? 어떻게 균형을 잡지? 아~ 하나의 요청이 다른 요청을 방해하는걸 방지하는 거구나. 스레드는 한정된 자원이니깐. 속도는 좀 느려져도 서버 장애는 방지할 수 있으니. 처리 실패(메시지 전송 같은) 는 증가 but 장애 방지!

당장 필요한 ㅡㅌ패 처리하는 게 중요하다
자원을 요청별로 배분해 특정 요청이 점유하지 않게 해야한다
트래픽 처리를위해 개섢라 여지는 많이 남아 있다

# 후기
실제 개발자가 하는 일을 구체적으로 들을수 있어 좋았음. 들으면서 어느정도 이해가 가서 스스로 좀 성장한거 같아 뿌듯함 ^ . ^